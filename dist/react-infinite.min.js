!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Infinite=e()}}(function(){return function e(t,i,r){function n(l,s){if(!i[l]){if(!t[l]){var a="function"==typeof require&&require;if(!s&&a)return a(l,!0);if(o)return o(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var p=i[l]={exports:{}};t[l][0].call(p.exports,function(e){var i=t[l][1][e];return n(i?i:e)},p,p.exports,e,t,i,r)}return i[l].exports}for(var o="function"==typeof require&&require,l=0;l<r.length;l++)n(r[l]);return n}({1:[function(e,t,i){(function(i){var r=i.React||e("react"),n=e("lodash.isarray"),o=e("lodash.isfinite"),l=e("./computers/constant_infinite_computer.js"),s=e("./computers/array_infinite_computer.js"),a=e("object-assign"),c=r.createClass({displayName:"Infinite",propTypes:{handleScroll:r.PropTypes.func,preloadBatchSize:r.PropTypes.number,preloadAdditionalHeight:r.PropTypes.number,elementHeight:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.arrayOf(r.PropTypes.number)]).isRequired,containerHeight:r.PropTypes.number.isRequired,infiniteLoadBeginBottomOffset:r.PropTypes.number,onInfiniteLoad:r.PropTypes.func,loadingSpinnerDelegate:r.PropTypes.node,isInfiniteLoading:r.PropTypes.bool,timeScrollStateLastsForAfterUserScrolls:r.PropTypes.number,useWindowAsScrollContainer:r.PropTypes.bool,className:r.PropTypes.string},getDefaultProps:function(){return{handleScroll:function(){},loadingSpinnerDelegate:r.createElement("div",null),onInfiniteLoad:function(){},isInfiniteLoading:!1,timeScrollStateLastsForAfterUserScrolls:150,useWindowAsScrollContainer:!1,className:""}},getInitialState:function(){this.computedProps=this.generateComputedProps(this.props),this.utils=this.generateComputedUtilityFunctions(this.props);var e=this.createInfiniteComputer(this.computedProps.elementHeight,this.computedProps.children),t=this.computedProps.preloadBatchSize,i=this.computedProps.preloadAdditionalHeight;return{infiniteComputer:e,numberOfChildren:r.Children.count(this.computedProps.children),displayIndexStart:0,displayIndexEnd:e.getDisplayIndexEnd(t+i),isInfiniteLoading:!1,preloadBatchSize:t,preloadAdditionalHeight:i,scrollTimeout:void 0,isScrolling:!1}},createInfiniteComputer:function(e,t){var i,a=r.Children.count(t);if(o(e))i=new l(e,a);else{if(!n(e))throw new Error("You must provide either a number or an array of numbers as the elementHeight prop.");i=new s(e,a)}return i},generateComputedProps:function(e){var t=a({},e);return t.containerHeight=e.useWindowAsScrollContainer?window.innerHeight:e.containerHeight,t.preloadBatchSize="number"==typeof e.preloadBatchSize?e.preloadBatchSize:t.containerHeight/2,t.preloadAdditionalHeight="number"==typeof e.preloadAdditionalHeight?e.preloadAdditionalHeight:t.containerHeight,t},generateComputedUtilityFunctions:function(e){var t={};return e.useWindowAsScrollContainer?(t.subscribeToScrollListener=function(){window.onscroll=this.infiniteHandleScroll}.bind(this),t.nodeScrollListener=function(){},t.getScrollTop=function(){return window.scrollY},t.scrollShouldBeIgnored=function(){return!1},t.buildScrollableStyle=function(){return{}}):(t.subscribeToScrollListener=function(){},t.nodeScrollListener=this.infiniteHandleScroll,t.getScrollTop=function(){return r.findDOMNode(this.refs.scrollable).scrollTop}.bind(this),t.scrollShouldBeIgnored=function(e){return e.target!==r.findDOMNode(this.refs.scrollable)}.bind(this),t.buildScrollableStyle=function(){return{height:this.computedProps.containerHeight,overflowX:"hidden",overflowY:"scroll"}}.bind(this)),t},componentWillReceiveProps:function(e){this.computedProps=this.generateComputedProps(e),this.utils=this.generateComputedUtilityFunctions(e);var t={};t.infiniteComputer=this.createInfiniteComputer(this.computedProps.elementHeight,this.computedProps.children),void 0!==this.computedProps.isInfiniteLoading&&(t.isInfiniteLoading=this.computedProps.isInfiniteLoading),t.preloadBatchSize=this.computedProps.preloadBatchSize,t.preloadAdditionalHeight=this.computedProps.preloadAdditionalHeight,this.setState(t,function(){this.setStateFromScrollTop(this.utils.getScrollTop())}.bind(this))},componentDidUpdate:function(e){r.Children.count(this.computedProps.children)!==r.Children.count(e.children)&&this.setStateFromScrollTop(this.utils.getScrollTop())},componentWillMount:function(){if(n(this.computedProps.elementHeight)&&r.Children.count(this.computedProps.children)!==this.computedProps.elementHeight.length)throw new Error("There must be as many values provided in the elementHeight prop as there are children.")},componentDidMount:function(){this.utils.subscribeToScrollListener()},setStateFromScrollTop:function(e){var t=0===this.state.preloadBatchSize?0:Math.floor(e/this.state.preloadBatchSize),i=this.state.preloadBatchSize*t,r=i+this.state.preloadBatchSize,n=Math.max(0,i-this.state.preloadAdditionalHeight),o=Math.min(this.state.infiniteComputer.getTotalScrollableHeight(),r+this.state.preloadAdditionalHeight);this.setState({displayIndexStart:this.state.infiniteComputer.getDisplayIndexStart(n),displayIndexEnd:this.state.infiniteComputer.getDisplayIndexEnd(o)})},infiniteHandleScroll:function(e){this.utils.scrollShouldBeIgnored(e)||(this.computedProps.handleScroll(r.findDOMNode(this.refs.scrollable)),this.handleScroll(this.utils.getScrollTop()))},manageScrollTimeouts:function(){this.state.scrollTimeout&&clearTimeout(this.state.scrollTimeout);var e=this,t=setTimeout(function(){e.setState({isScrolling:!1,scrollTimeout:void 0})},this.computedProps.timeScrollStateLastsForAfterUserScrolls);this.setState({isScrolling:!0,scrollTimeout:t})},handleScroll:function(e){this.manageScrollTimeouts(),this.setStateFromScrollTop(e);var t=e>this.state.infiniteComputer.getTotalScrollableHeight()-this.computedProps.containerHeight-this.computedProps.infiniteLoadBeginBottomOffset;t&&!this.state.isInfiniteLoading&&(this.setState({isInfiniteLoading:!0}),this.computedProps.onInfiniteLoad())},buildScrollableStyle:function(){return{height:this.computedProps.containerHeight,overflowX:"hidden",overflowY:"scroll"}},buildHeightStyle:function(e){return{width:"100%",height:Math.ceil(e)}},render:function(){var e=this.computedProps.children.slice(this.state.displayIndexStart,this.state.displayIndexEnd+1),t={};this.state.isScrolling&&(t.pointerEvents="none");var i=this.state.infiniteComputer.getTopSpacerHeight(this.state.displayIndexStart),n=this.state.infiniteComputer.getBottomSpacerHeight(this.state.displayIndexEnd);return r.createElement("div",{className:this.computedProps.className,ref:"scrollable",style:this.utils.buildScrollableStyle(),onScroll:this.utils.nodeScrollListener},r.createElement("div",{ref:"smoothScrollingWrapper",style:t},r.createElement("div",{ref:"topSpacer",style:this.buildHeightStyle(i)}),e,r.createElement("div",{ref:"bottomSpacer",style:this.buildHeightStyle(n)}),r.createElement("div",{ref:"loadingSpinner"},this.state.isInfiniteLoading?this.computedProps.loadingSpinnerDelegate:null)))}});t.exports=c,i.Infinite=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./computers/array_infinite_computer.js":5,"./computers/constant_infinite_computer.js":6,"lodash.isarray":2,"lodash.isfinite":3,"object-assign":4,react:void 0}],2:[function(e,t,i){function r(e){return!!e&&"object"==typeof e}function n(e,t){var i=null==e?void 0:e[t];return a(i)?i:void 0}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&b>=e}function l(e){return s(e)&&g.call(e)==p}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null==e?!1:l(e)?m.test(h.call(e)):r(e)&&u.test(e)}var c="[object Array]",p="[object Function]",u=/^\[object .+?Constructor\]$/,d=Object.prototype,h=Function.prototype.toString,f=d.hasOwnProperty,g=d.toString,m=RegExp("^"+h.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=n(Array,"isArray"),b=9007199254740991,S=y||function(e){return r(e)&&o(e.length)&&g.call(e)==c};t.exports=S},{}],3:[function(e,t,i){(function(e){function i(e){return"number"==typeof e&&r(e)}var r=e.isFinite;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,i){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(e,t){for(var i,l,s=r(e),a=1;a<arguments.length;a++){i=Object(arguments[a]);for(var c in i)n.call(i,c)&&(s[c]=i[c]);if(Object.getOwnPropertySymbols){l=Object.getOwnPropertySymbols(i);for(var p=0;p<l.length;p++)o.call(i,l[p])&&(s[l[p]]=i[l[p]])}}return s}},{}],5:[function(e,t,i){function r(e,t){"use strict";n.call(this,e,t),this.prefixHeightData=this.heightData.reduce(function(e,t){return 0===e.length?[t]:(e.push(e[e.length-1]+t),e)},[])}var n=e("./infinite_computer.js"),o=e("../utils/binary_index_search.js");for(var l in n)n.hasOwnProperty(l)&&(r[l]=n[l]);var s=null===n?null:n.prototype;r.prototype=Object.create(s),r.prototype.constructor=r,r.__superConstructor__=n,Object.defineProperty(r.prototype,"maybeIndexToIndex",{writable:!0,configurable:!0,value:function(e){"use strict";return"undefined"==typeof e||null===e?this.prefixHeightData.length-1:e}}),Object.defineProperty(r.prototype,"getTotalScrollableHeight",{writable:!0,configurable:!0,value:function(){"use strict";var e=this.prefixHeightData.length;return 0===e?0:this.prefixHeightData[e-1]}}),Object.defineProperty(r.prototype,"getDisplayIndexStart",{writable:!0,configurable:!0,value:function(e){"use strict";var t=o.binaryIndexSearch(this.prefixHeightData,e,o.opts.CLOSEST_HIGHER);return this.maybeIndexToIndex(t)}}),Object.defineProperty(r.prototype,"getDisplayIndexEnd",{writable:!0,configurable:!0,value:function(e){"use strict";var t=o.binaryIndexSearch(this.prefixHeightData,e,o.opts.CLOSEST_HIGHER);return this.maybeIndexToIndex(t)}}),Object.defineProperty(r.prototype,"getTopSpacerHeight",{writable:!0,configurable:!0,value:function(e){"use strict";var t=e-1;return 0>t?0:this.prefixHeightData[t]}}),Object.defineProperty(r.prototype,"getBottomSpacerHeight",{writable:!0,configurable:!0,value:function(e){"use strict";return-1===e?0:this.getTotalScrollableHeight()-this.prefixHeightData[e]}}),t.exports=r},{"../utils/binary_index_search.js":8,"./infinite_computer.js":7}],6:[function(e,t,i){function r(){"use strict";null!==n&&n.apply(this,arguments)}var n=e("./infinite_computer.js");for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);var l=null===n?null:n.prototype;r.prototype=Object.create(l),r.prototype.constructor=r,r.__superConstructor__=n,Object.defineProperty(r.prototype,"getTotalScrollableHeight",{writable:!0,configurable:!0,value:function(){"use strict";return this.heightData*this.numberOfChildren}}),Object.defineProperty(r.prototype,"getDisplayIndexStart",{writable:!0,configurable:!0,value:function(e){"use strict";return Math.floor(e/this.heightData)}}),Object.defineProperty(r.prototype,"getDisplayIndexEnd",{writable:!0,configurable:!0,value:function(e){"use strict";var t=Math.ceil(e/this.heightData);return t>0?t-1:t}}),Object.defineProperty(r.prototype,"getTopSpacerHeight",{writable:!0,configurable:!0,value:function(e){"use strict";return e*this.heightData}}),Object.defineProperty(r.prototype,"getBottomSpacerHeight",{writable:!0,configurable:!0,value:function(e){"use strict";var t=e+1;return Math.max(0,(this.numberOfChildren-t)*this.heightData)}}),t.exports=r},{"./infinite_computer.js":7}],7:[function(e,t,i){function r(e,t){"use strict";this.heightData=e,this.numberOfChildren=t}Object.defineProperty(r.prototype,"getTotalScrollableHeight",{writable:!0,configurable:!0,value:function(){"use strict";throw new Error("getTotalScrollableHeight not implemented.")}}),Object.defineProperty(r.prototype,"getDisplayIndexStart",{writable:!0,configurable:!0,value:function(e){"use strict";throw new Error("getDisplayIndexStart not implemented.")}}),Object.defineProperty(r.prototype,"getDisplayIndexEnd",{writable:!0,configurable:!0,value:function(e){"use strict";throw new Error("getDisplayIndexEnd not implemented.")}}),Object.defineProperty(r.prototype,"getTopSpacerHeight",{writable:!0,configurable:!0,value:function(e){"use strict";throw new Error("getTopSpacerHeight not implemented.")}}),Object.defineProperty(r.prototype,"getBottomSpacerHeight",{writable:!0,configurable:!0,value:function(e){"use strict";throw new Error("getBottomSpacerHeight not implemented.")}}),t.exports=r},{}],8:[function(e,t,i){var r={CLOSEST_LOWER:1,CLOSEST_HIGHER:2},n=function(e,t,i){for(var n,o,l,s=e.length-1,a=0;s>=a;){if(o=a+Math.floor((s-a)/2),l=e[o],l===t)return o;t>l?a=o+1:l>t&&(s=o-1)}return i===r.CLOSEST_LOWER&&a>0?n=a-1:i===r.CLOSEST_HIGHER&&s<e.length-1&&(n=s+1),n};t.exports={binaryIndexSearch:n,opts:r}},{}]},{},[1])(1)});