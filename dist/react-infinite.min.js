!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Infinite=e()}}(function(){return function e(t,n,r){function i(l,a){if(!n[l]){if(!t[l]){var s="function"==typeof require&&require;if(!a&&s)return s(l,!0);if(o)return o(l,!0);var u=new Error("Cannot find module '"+l+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[l]={exports:{}};t[l][0].call(c.exports,function(e){var n=t[l][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[l].exports}for(var o="function"==typeof require&&require,l=0;l<r.length;l++)i(r[l]);return i}({1:[function(e,t,n){(function(n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=n.React||e("react");e("./utils/establish-polyfills");var o=e("./utils/checkProps"),l=e("./utils/types").preloadType,a=e("./utils/scaleEnum"),s=e("./utils/infiniteHelpers"),u=e("lodash.isfinite"),c=i.createClass({displayName:"Infinite",propTypes:{children:i.PropTypes.any,handleScroll:i.PropTypes.func,preloadBatchSize:l,preloadAdditionalHeight:l,elementHeight:i.PropTypes.oneOfType([i.PropTypes.number,i.PropTypes.arrayOf(i.PropTypes.number)]).isRequired,containerHeight:i.PropTypes.number.isRequired,useWindowAsScrollContainer:i.PropTypes.bool,infiniteLoadBeginBottomOffset:i.PropTypes.number,onInfiniteLoad:i.PropTypes.func,loadingSpinnerDelegate:i.PropTypes.node,isInfiniteLoading:i.PropTypes.bool,timeScrollStateLastsForAfterUserScrolls:i.PropTypes.number,className:i.PropTypes.string},statics:{containerHeightScaleFactor:function(e){if(!u(e))throw new Error("The scale factor must be a number.");return{type:a.CONTAINER_HEIGHT_SCALE_FACTOR,amount:e}}},computedProps:{},utils:{},getDefaultProps:function(){return{handleScroll:function(){},useWindowAsScrollContainer:!1,onInfiniteLoad:function(){},loadingSpinnerDelegate:i.createElement("div",null),isInfiniteLoading:!1,timeScrollStateLastsForAfterUserScrolls:150,className:""}},getInitialState:function(){var e=this.recomputeInternalStateFromProps(this.props);this.computedProps=e.computedProps,this.utils=e.utils;var t=e.newState;return t.scrollTimeout=void 0,t.isScrolling=!1,t},generateComputedProps:function(e){var t=e.containerHeight,n=e.preloadBatchSize,i=e.preloadAdditionalHeight,o=r(e,["containerHeight","preloadBatchSize","preloadAdditionalHeight"]),l={};l.containerHeight=e.useWindowAsScrollContainer?window.innerHeight:t;var s={type:a.CONTAINER_HEIGHT_SCALE_FACTOR,amount:.5},u=n&&n.type?n:s;"number"==typeof n?l.preloadBatchSize=n:u.type===a.CONTAINER_HEIGHT_SCALE_FACTOR?l.preloadBatchSize=l.containerHeight*u.amount:l.preloadBatchSize=0;var c={type:a.CONTAINER_HEIGHT_SCALE_FACTOR,amount:1},p=i&&i.type?i:c;return"number"==typeof i?l.preloadAdditionalHeight=i:p.type===a.CONTAINER_HEIGHT_SCALE_FACTOR?l.preloadAdditionalHeight=l.containerHeight*p.amount:l.preloadAdditionalHeight=0,Object.assign(o,l)},generateComputedUtilityFunctions:function(e){var t=this,n={};return e.useWindowAsScrollContainer?(n.subscribeToScrollListener=function(){window.addEventListener("scroll",t.infiniteHandleScroll)},n.unsubscribeFromScrollListener=function(){window.removeEventListener("scroll",t.infiniteHandleScroll)},n.nodeScrollListener=function(){},n.getScrollTop=function(){return window.scrollY},n.scrollShouldBeIgnored=function(){return!1},n.buildScrollableStyle=function(){return{}}):(n.subscribeToScrollListener=function(){},n.unsubscribeFromScrollListener=function(){},n.nodeScrollListener=this.infiniteHandleScroll,n.getScrollTop=function(){var e;return t.refs&&t.refs.scrollable&&(e=i.findDOMNode(t.refs.scrollable)),e?e.scrollTop:0},n.scrollShouldBeIgnored=function(e){return e.target!==i.findDOMNode(t.refs.scrollable)},n.buildScrollableStyle=function(){return{height:t.computedProps.containerHeight,overflowX:"hidden",overflowY:"scroll",WebkitOverflowScrolling:"touch"}}),n},recomputeInternalStateFromProps:function(e){o(e);var t=this.generateComputedProps(e),n=this.generateComputedUtilityFunctions(e),r={};return r.numberOfChildren=i.Children.count(t.children),r.infiniteComputer=s.createInfiniteComputer(t.elementHeight,t.children),void 0!==t.isInfiniteLoading&&(r.isInfiniteLoading=t.isInfiniteLoading),r.preloadBatchSize=t.preloadBatchSize,r.preloadAdditionalHeight=t.preloadAdditionalHeight,r=Object.assign(r,s.recomputeApertureStateFromOptionsAndScrollTop(r,n.getScrollTop())),{computedProps:t,utils:n,newState:r}},componentWillReceiveProps:function(e){var t=this.recomputeInternalStateFromProps(e);this.computedProps=t.computedProps,this.utils=t.utils,this.setState(t.newState)},componentDidUpdate:function(e){if(i.Children.count(this.props.children)!==i.Children.count(e.children)){var t=s.recomputeApertureStateFromOptionsAndScrollTop(this.state,this.utils.getScrollTop());this.setState(t)}},componentDidMount:function(){this.utils.subscribeToScrollListener(),u(this.computedProps.infiniteLoadBeginBottomOffset)&&this.state.infiniteComputer.getTotalScrollableHeight()<this.computedProps.containerHeight&&(this.setState({isInfiniteLoading:!0}),this.computedProps.onInfiniteLoad())},componentWillUnmount:function(){this.utils.unsubscribeFromScrollListener()},infiniteHandleScroll:function(e){this.utils.scrollShouldBeIgnored(e)||(this.computedProps.handleScroll(i.findDOMNode(this.refs.scrollable)),this.handleScroll(this.utils.getScrollTop()))},manageScrollTimeouts:function(){this.state.scrollTimeout&&clearTimeout(this.state.scrollTimeout);var e=this,t=setTimeout(function(){e.setState({isScrolling:!1,scrollTimeout:void 0})},this.computedProps.timeScrollStateLastsForAfterUserScrolls);this.setState({isScrolling:!0,scrollTimeout:t})},handleScroll:function(e){this.manageScrollTimeouts();var t=s.recomputeApertureStateFromOptionsAndScrollTop(this.state,e),n=e>this.state.infiniteComputer.getTotalScrollableHeight()-this.computedProps.containerHeight-this.computedProps.infiniteLoadBeginBottomOffset;n&&!this.state.isInfiniteLoading?(this.setState(Object.assign({},t,{isInfiniteLoading:!0})),this.computedProps.onInfiniteLoad()):this.setState(t)},buildHeightStyle:function(e){return{width:"100%",height:Math.ceil(e)}},render:function(){var e;e=i.Children.count(this.computedProps.children)>1?this.computedProps.children.slice(this.state.displayIndexStart,this.state.displayIndexEnd+1):this.computedProps.children;var t={};this.state.isScrolling&&(t.pointerEvents="none");var n=this.state.infiniteComputer.getTopSpacerHeight(this.state.displayIndexStart),r=this.state.infiniteComputer.getBottomSpacerHeight(this.state.displayIndexEnd);return i.createElement("div",{className:this.computedProps.className,ref:"scrollable",style:this.utils.buildScrollableStyle(),onScroll:this.utils.nodeScrollListener},i.createElement("div",{ref:"smoothScrollingWrapper",style:t},i.createElement("div",{ref:"topSpacer",style:this.buildHeightStyle(n)}),e,i.createElement("div",{ref:"bottomSpacer",style:this.buildHeightStyle(r)}),i.createElement("div",{ref:"loadingSpinner"},this.state.isInfiniteLoading?this.computedProps.loadingSpinnerDelegate:null)))}});t.exports=c,n.Infinite=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils/checkProps":9,"./utils/establish-polyfills":10,"./utils/infiniteHelpers":11,"./utils/scaleEnum":12,"./utils/types":13,"lodash.isfinite":3,react:void 0}],2:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&S>=e}function l(e){return a(e)&&g.call(e)==c}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:l(e)?y.test(d.call(e)):r(e)&&p.test(e)}var u="[object Array]",c="[object Function]",p=/^\[object .+?Constructor\]$/,f=Object.prototype,d=Function.prototype.toString,h=f.hasOwnProperty,g=f.toString,y=RegExp("^"+d.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=i(Array,"isArray"),S=9007199254740991,b=m||function(e){return r(e)&&o(e.length)&&g.call(e)==u};t.exports=b},{}],3:[function(e,t,n){(function(e){function n(e){return"number"==typeof e&&r(e)}var r=e.isFinite;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(e,t){for(var n,l,a=r(e),s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var u in n)i.call(n,u)&&(a[u]=n[u]);if(Object.getOwnPropertySymbols){l=Object.getOwnPropertySymbols(n);for(var c=0;c<l.length;c++)o.call(n,l[c])&&(a[l[c]]=n[l[c]])}}return a}},{}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var i=e,o=t,l=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var s=a.get;return void 0===s?void 0:s.call(l)}var u=Object.getPrototypeOf(i);if(null===u)return void 0;e=u,t=o,n=l,r=!0,a=u=void 0}},a=e("./infiniteComputer.js"),s=e("../utils/binaryIndexSearch.js"),u=function(e){function t(e,n){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.prefixHeightData=this.heightData.reduce(function(e,t){return 0===e.length?[t]:(e.push(e[e.length-1]+t),e)},[])}return i(t,e),o(t,[{key:"maybeIndexToIndex",value:function(e){return"undefined"==typeof e||null===e?this.prefixHeightData.length-1:e}},{key:"getTotalScrollableHeight",value:function(){var e=this.prefixHeightData.length;return 0===e?0:this.prefixHeightData[e-1]}},{key:"getDisplayIndexStart",value:function(e){var t=s.binaryIndexSearch(this.prefixHeightData,e,s.opts.CLOSEST_HIGHER);return this.maybeIndexToIndex(t)}},{key:"getDisplayIndexEnd",value:function(e){var t=s.binaryIndexSearch(this.prefixHeightData,e,s.opts.CLOSEST_HIGHER);return this.maybeIndexToIndex(t)}},{key:"getTopSpacerHeight",value:function(e){var t=e-1;return 0>t?0:this.prefixHeightData[t]}},{key:"getBottomSpacerHeight",value:function(e){return-1===e?0:this.getTotalScrollableHeight()-this.prefixHeightData[e]}}]),t}(a);t.exports=u},{"../utils/binaryIndexSearch.js":8,"./infiniteComputer.js":7}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var i=e,o=t,l=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var s=a.get;return void 0===s?void 0:s.call(l)}var u=Object.getPrototypeOf(i);if(null===u)return void 0;e=u,t=o,n=l,r=!0,a=u=void 0}},a=e("./infiniteComputer.js"),s=function(e){function t(){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"getTotalScrollableHeight",value:function(){return this.heightData*this.numberOfChildren}},{key:"getDisplayIndexStart",value:function(e){return Math.floor(e/this.heightData)}},{key:"getDisplayIndexEnd",value:function(e){var t=Math.ceil(e/this.heightData);return t>0?t-1:t}},{key:"getTopSpacerHeight",value:function(e){return e*this.heightData}},{key:"getBottomSpacerHeight",value:function(e){var t=e+1;return Math.max(0,(this.numberOfChildren-t)*this.heightData)}}]),t}(a);t.exports=s},{"./infiniteComputer.js":7}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.heightData=t,this.numberOfChildren=n}return i(e,[{key:"getTotalScrollableHeight",value:function(){throw new Error("getTotalScrollableHeight not implemented.")}},{key:"getDisplayIndexStart",value:function(e){throw new Error("getDisplayIndexStart not implemented.")}},{key:"getDisplayIndexEnd",value:function(e){throw new Error("getDisplayIndexEnd not implemented.")}},{key:"getTopSpacerHeight",value:function(e){throw new Error("getTopSpacerHeight not implemented.")}},{key:"getBottomSpacerHeight",value:function(e){throw new Error("getBottomSpacerHeight not implemented.")}}]),e}();t.exports=o},{}],8:[function(e,t,n){"use strict";var r={CLOSEST_LOWER:1,CLOSEST_HIGHER:2},i=function(e,t,n){for(var i,o,l,a=e.length-1,s=0;a>=s;){if(o=s+Math.floor((a-s)/2),l=e[o],l===t)return o;t>l?s=o+1:l>t&&(a=o-1)}return n===r.CLOSEST_LOWER&&s>0?i=s-1:n===r.CLOSEST_HIGHER&&a<e.length-1&&(i=a+1),i};t.exports={binaryIndexSearch:i,opts:r}},{}],9:[function(e,t,n){(function(n){"use strict";var r=n.React||e("react"),i=e("lodash.isfinite");t.exports=function(e){var t="Invariant Violation: ";if(!e.containerHeight&&!e.useWindowAsScrollContainer)throw new Error(t+"Either containerHeight or useWindowAsScrollContainer must be provided.");if(!i(e.elementHeight)&&!Array.isArray(e.elementHeight))throw new Error(t+"You must provide either a number or an array of numbers as the elementHeight.");if(Array.isArray(e.elementHeight)&&r.Children.count(e.children)!==e.elementHeight.length)throw new Error(t+"There must be as many values provided in the elementHeight prop as there are children.")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash.isfinite":3,react:void 0}],10:[function(e,t,n){"use strict";Object.assign||(Object.assign=e("object-assign")),Array.isArray||(Array.isArray=e("lodash.isarray"))},{"lodash.isarray":2,"object-assign":4}],11:[function(e,t,n){(function(n){"use strict";function r(e,t){var n,r=a.Children.count(t);return n=Array.isArray(e)?new l(e,r):new o(e,r)}function i(e,t){var n=e.preloadBatchSize,r=e.preloadAdditionalHeight,i=e.infiniteComputer;return function(){var e=0===n?0:Math.floor(t/n),o=n*e,l=o+n,a=Math.max(0,o-r),s=Math.min(i.getTotalScrollableHeight(),l+r);return{displayIndexStart:i.getDisplayIndexStart(a),displayIndexEnd:i.getDisplayIndexEnd(s)}}()}var o=e("../computers/constantInfiniteComputer.js"),l=e("../computers/arrayInfiniteComputer.js"),a=n.React||e("react");t.exports={createInfiniteComputer:r,recomputeApertureStateFromOptionsAndScrollTop:i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../computers/arrayInfiniteComputer.js":5,"../computers/constantInfiniteComputer.js":6,react:void 0}],12:[function(e,t,n){"use strict";t.exports={CONTAINER_HEIGHT_SCALE_FACTOR:"containerHeightScaleFactor"}},{}],13:[function(e,t,n){(function(n){"use strict";var r=n.React||e("react");t.exports={preloadType:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.shape({type:r.PropTypes.oneOf(["containerHeightScaleFactor"]).isRequired,amount:r.PropTypes.number.isRequired})])}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{react:void 0}]},{},[1])(1)});